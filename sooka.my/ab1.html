<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tonton Live TV</title>
    <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
</head>
<body>
    <h2>Live TV Stream</h2>
    <video id="videoPlayer" controls autoplay style="width: 100%; max-width: 800px;"></video>

    <script>
        (function () {
            var url = "https://l01.dp.sooka.my/5099/linear/index.mpd";
            var video = document.querySelector("#videoPlayer");
            var player = dashjs.MediaPlayer().create();

            // Bearer Token
            var authToken = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ3bXZlciI6Miwid21pZGZtdCI6ImFzY2lpIiwid21pZHR5cCI6MSwid21rZXl2ZXIiOjEsIndtaWRsZW4iOjUxMiwid21pZCI6Ik9URTNZV0l3Tm1ZdE5HVmxOaTAwTXprd0xUa3dZbUV0TVdNd09HRTVNbUZrTkdJeiIsIndtb3BpZCI6MzIsImV4cCI6MTczOTkwNDU5NiwiaWF0IjoxNzM5MzAwNTk2fQ.cUtgV8thOcbEV1ceX_JISzV3SZ21i7m-e4ukxLgVw6w";

            // User-Agent
            var userAgent = "Mozilla/5.0 (Linux; Android 12; Pixel 3a XL Build/SP2A.220505.008; wv) AppleWebKit/537.36 (KHTML, seperti Gecko) Versi/4.0 Chrome/114.0.5715.0 Mobile Safari/537.36";

            // Konfigurasi Dash.js
            player.initialize(video, url, true);

            // Tetapkan kunci DRM ClearKey
            player.setProtectionData({
                "org.w3.clearkey": {
                    "clearkeys": {
                        "57833c900c4c437f82daf6785eb6ef36": "7bf4663e43cdc277b4ae18219c81d2a1",
                        "fb06bb8266fb4a998e7c4e7e90461556": "52242587d8106c4b3ed596c7a56b4e28"
                    }
                }
            });

            // Tambahkan Header Authorization dan User-Agent
            player.extend("XHRLoader", function (originalLoader) {
                return class extends originalLoader {
                    constructor() {
                        super();
                        this.requestModifier = (request) => {
                            request.headers = request.headers || {};
                            request.headers["Authorization"] = authToken;
                            request.headers["User-Agent"] = userAgent;
                        };
                    }
                };
            }, true);
        })();
    </script>
</body>
</html>
